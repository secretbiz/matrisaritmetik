@model Dictionary<string, dynamic>
@{
    Layout = null;
    MatrisAritmetik.Core.Models.Command cmd;
    MatrisAritmetik.Core.CommandMessage msg;
    if (Model != null)
    {
        if (!Model.ContainsKey("CommandHistory"))
            Model.Add("CommandHistory", new List<MatrisAritmetik.Core.Models.Command>());
        if (!Model.ContainsKey("LastMessage"))
            Model.Add("LastMessage", new Core.CommandMessage("", Core.CommandState.IDLE));
    }
}

@if (Model != null)
{
    msg = Model["LastMessage"];
    if (msg.State == Core.CommandState.ERROR)
    {
        <tr>
            <td class="output_cmd_error">
                <span style="font-size:14px;font-weight:bolder"> [HATA]: @msg.Message</span>
            </td>
        </tr>
    }
    else if (msg.State == Core.CommandState.WARNING)
    {
        <tr>
            <td class="output_cmd_warning">
                <span style="font-size:14px;font-weight:bolder"> [UYARI]: @msg.Message</span>
            </td>
        </tr>
    }
    else if (msg.State == Core.CommandState.SUCCESS)
    {
        <tr>
            <td class="output_cmd_info">
                <span style="font-weight:bold"> @msg.Message</span>
            </td>
        </tr>
    }
    else
    {
        <tr>
            <td class="output_cmd_info">
                <span style="font-weight:bold"> Son bilgilendirme mesajı: Burada gösterilir</span>
            </td>
        </tr>
    }

    if (Model["CommandHistory"].Count == 0)
    {

        <tr class="cmdrepeat" title='Komut ek-bilgileri burada görüntülenir'>
            <td>
                <span class="command_start">>>></span> Komut geçmişi burada görüntülenir <span class="command_start">=</span>
            </td>
        </tr>

        <tr class="outputRow">
            <td class="cmdoutput">Çıktı geçmişi burada görüntülenir...</td>
        </tr>

    }
    else
    {
        @for (int i = Model["CommandHistory"].Count - 1; i >= 0; i--)
        {
            cmd = Model["CommandHistory"][i];

            @if (cmd.STATE == Core.CommandState.SUCCESS)
            {
                if (cmd.OriginalCommand.Contains("?"))
                {
                    <tr class="cmdrepeat cmdHelpCommandGiven" title='@cmd.CommandSummary()'>
                        <td>
                            <span class="cmdHelpStart">>>></span> @cmd.OriginalCommand <span class="cmdHelpStart">=</span>
                        </td>
                    </tr>

                    <tr class="outputRow">
                        <td class="cmdoutput compilerHelp">@cmd.Output</td>
                    </tr>
                }
                else
                {
                    <tr class="cmdrepeat" title='@cmd.CommandSummary()'>
                        <td>
                            <span class="command_start">>>></span> @cmd.OriginalCommand <span class="command_start">=</span>
                        </td>
                    </tr>

                    <tr class="outputRow">
                        <td class="cmdoutput">@cmd.Output</td>
                    </tr>
                }
            }
            else if (cmd.STATE == Core.CommandState.ERROR)
            {
                <tr class="cmdrepeat" style="min-height:unset !important;" title='@cmd.CommandSummary()'>
                    <td class="commandError">
                        <span class="command_start">>>></span> @cmd.OriginalCommand
                    </td>
                </tr>
                <tr class="outputRow">
                    <td class="cmdoutput" style="white-space:unset !important;">
                        <span style="color:red;font-size:16px;font-weight:bolder">[HATA]</span> @cmd.STATE_MESSAGE
                    </td>
                </tr>
            }
        }
    }
}
